version: 1.0
### If you're using AWS App Runner, you will need to do manual
# Configuration, because you don't want the SUPABASE_URL and SUPABASE_ANON_KEY to be exposed.
# In the github repo.
runtime: nodejs22
build:
  commands:
    pre-build:
      - corepack enable
      - corepack prepare --activate
      - pnpm install --frozen-lockfile
    build:
      - pnpm build
run:
  command: node dist/main.js
  network:
    port: 3000
    env: PORT
  env:
    - name: NODE_ENV
      value: production
